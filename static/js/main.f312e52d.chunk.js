(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{22:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),o=a(12),r=a.n(o),c=a(7),i=(a(22),a(17)),l=a(2),u=s.a.createContext(),m=a.p+"static/media/logo.bbe2a6ea.svg",d=a(0);var p=function(){return Object(d.jsx)("header",{className:"header",children:Object(d.jsx)("img",{className:"logo",src:m,alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f"})})};var j=function(e){var t=s.a.useContext(u),a=e.card.owner._id===t._id,n="card__delete page__button ".concat(a?"card__delete_visible":"card__delete_invisible"),o=e.card.likes.some((function(e){return e._id===t._id})),r="".concat(o?"card__like card__like_active":"card__like");return Object(d.jsxs)("li",{className:"card",children:[Object(d.jsx)("button",{className:n,type:"button",onClick:function(){e.onCardDelete(),e.onCardDataRead(e.card),e.onButtonPopupTextRead("\u0414\u0430")}}),Object(d.jsx)("img",{className:"card__image",alt:e.name,src:e.link,onClick:function(){e.onCardClick(e.card)}}),Object(d.jsxs)("div",{className:"card__image-info",children:[Object(d.jsx)("h2",{className:"card__title",children:e.name}),Object(d.jsxs)("div",{className:"card__like-box",children:[Object(d.jsx)("button",{className:r,type:"button",onClick:function(){e.onCardLike(e.card)}}),Object(d.jsx)("p",{className:"card__like-amount",children:e.likes})]})]})]})};var b=function(e){var t=s.a.useContext(u);return Object(d.jsxs)("main",{className:"content",children:[Object(d.jsxs)("section",{className:"profile",children:[Object(d.jsxs)("div",{className:"profile__info",children:[Object(d.jsxs)("div",{className:"profile__avatar-box",children:[Object(d.jsx)("img",{className:"profile__avatar",alt:"\u0430\u0432\u0430\u0442\u0430\u0440",src:t.avatar}),Object(d.jsx)("div",{className:"profile__avatar-hover",children:Object(d.jsx)("button",{className:"profile__edit-avatar-button",type:"button",onClick:function(){e.onEditAvatar(),e.onButtonTextRead("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")}})})]}),Object(d.jsxs)("div",{className:"profile__text",children:[Object(d.jsxs)("div",{className:"profile__name-edit",children:[Object(d.jsx)("h1",{className:"profile__name",children:t.name}),Object(d.jsx)("button",{className:"profile__edit-button page__button",type:"button",onClick:function(){e.onEditProfile(),e.onButtonTextRead("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")}})]}),Object(d.jsx)("p",{className:"profile__about",children:t.about})]})]}),Object(d.jsx)("button",{className:"profile__add-button page__button",type:"button",onClick:function(){e.onAddPlace(),e.onButtonTextRead("\u0421\u043e\u0437\u0434\u0430\u0442\u044c")}})]}),Object(d.jsx)("section",{className:"gallery",children:Object(d.jsx)("ul",{className:"cards",children:e.cards.map((function(t){return Object(d.jsx)(j,{card:t,name:t.name,link:t.link,likes:t.likes.length,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete,onCardDataRead:e.onCardDataRead,onButtonPopupTextRead:e.onButtonTextRead},t._id)}))})})]})};var _=function(){return Object(d.jsx)("footer",{className:"footer",children:Object(d.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Mesto Russia"})})};var f=function(e){return Object(d.jsxs)("section",{className:"start-page",children:[Object(d.jsx)("h2",{className:"start-page__title",children:"\u0412\u0445\u043e\u0434"}),Object(d.jsxs)("form",{className:"form",name:"login",onSubmit:e.onSubmit,children:[Object(d.jsxs)("div",{className:"form__section",children:[Object(d.jsx)("label",{htmlFor:"email",className:"form__label"}),Object(d.jsx)("input",{type:"email",className:"form__item form__item_type_start-page form__item_type_email",id:"email",name:"email",placeholder:"Email",required:!0,minLength:"2",maxLength:"40"}),Object(d.jsx)("span",{className:"form__input-error",id:"email-error"})]}),Object(d.jsxs)("div",{className:"form__section",children:[Object(d.jsx)("label",{htmlFor:"password",className:"form__label"}),Object(d.jsx)("input",{type:"text",className:"form__item form__item_type_start-page form__item_type_password",id:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,minLength:"2",maxLength:"200"}),Object(d.jsx)("span",{className:"form__input-error",id:"password-error"})]}),Object(d.jsx)("button",{type:"submit",className:"form__save form__save_type_start-page",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})};var h=function(e){return Object(d.jsxs)("section",{className:"start-page",children:[Object(d.jsx)("h2",{className:"start-page__title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(d.jsxs)("form",{className:"form",name:"register",onSubmit:e.onSubmit,children:[Object(d.jsxs)("div",{className:"form__section",children:[Object(d.jsx)("label",{htmlFor:"email",className:"form__label"}),Object(d.jsx)("input",{type:"email",className:"form__item form__item_type_start-page form__item_type_email",id:"email",name:"email",placeholder:"Email",required:!0,minLength:"2",maxLength:"40"}),Object(d.jsx)("span",{className:"form__input-error",id:"email-error"})]}),Object(d.jsxs)("div",{className:"form__section",children:[Object(d.jsx)("label",{htmlFor:"password",className:"form__label"}),Object(d.jsx)("input",{type:"text",className:"form__item form__item_type_start-page form__item_type_password",id:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,minLength:"2",maxLength:"200"}),Object(d.jsx)("span",{className:"form__input-error",id:"password-error"})]}),Object(d.jsx)("button",{type:"submit",className:"form__save form__save_type_start-page",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(d.jsx)(c.b,{exact:!0,to:"/login",className:"start-page__login-link",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438"})]})};var O=function(e){return Object(d.jsx)("section",{className:e.isOpen?"popup popup_type_".concat(e.name," popup_is-opened"):"popup popup_type_".concat(e.name),children:Object(d.jsxs)("div",{className:"popup__container",children:[Object(d.jsx)("button",{className:"popup__close page__button",onClick:e.onClose}),Object(d.jsxs)("div",{className:"popup__content",children:[Object(d.jsx)("h2",{className:"popup__title",children:e.title}),Object(d.jsxs)("form",{className:"form",name:e.name,onSubmit:e.onSubmit,children:[e.children,Object(d.jsx)("button",{type:"submit",className:"form__save",disabled:e.buttonDisable,children:e.buttonText})]})]})]})})};var x=function(e){var t=s.a.useState(""),a=Object(l.a)(t,2),n=a[0],o=a[1],r=s.a.useState(""),c=Object(l.a)(r,2),i=c[0],u=c[1];return Object(d.jsx)(O,{name:"card",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:n,link:i}),o(""),u("")},buttonText:e.buttonText,buttonDisable:e.buttonDisable,children:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"form__section",children:[Object(d.jsx)("label",{htmlFor:"photo-name",className:"form__label"}),Object(d.jsx)("input",{type:"text",className:"form__item form__item_type_photo-name",id:"photo-name",name:"name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"2",maxLength:"30",value:n||"",onChange:function(e){o(e.target.value)}}),Object(d.jsx)("span",{className:"form__input-error",id:"photo-name-error"})]}),Object(d.jsxs)("div",{className:"form__section",children:[Object(d.jsx)("label",{htmlFor:"link",className:"form__label"}),Object(d.jsx)("input",{type:"url",className:"form__item form__item_type_link",id:"link",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,value:i||"",onChange:function(e){u(e.target.value)}}),Object(d.jsx)("span",{className:"form__input-error",id:"link-error"})]})]})})};var A=function(e){var t=s.a.useState(""),a=Object(l.a)(t,2),n=a[0],o=a[1],r=s.a.useState(""),c=Object(l.a)(r,2),i=c[0],m=c[1],p=s.a.useContext(u);return s.a.useEffect((function(){o(p.name),m(p.about)}),[p,e.isOpen]),Object(d.jsx)(O,{name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:n,about:i})},buttonText:e.buttonText,buttonDisable:e.buttonDisable,children:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"form__section",children:[Object(d.jsx)("label",{htmlFor:"name",className:"form__label"}),Object(d.jsx)("input",{type:"text",className:"form__item form__item_type_name",id:"name",name:"name",placeholder:"\u0418\u043c\u044f",required:!0,minLength:"2",maxLength:"40",value:n||"",onChange:function(e){o(e.target.value)}}),Object(d.jsx)("span",{className:"form__input-error",id:"name-error"})]}),Object(d.jsxs)("div",{className:"form__section",children:[Object(d.jsx)("label",{htmlFor:"about",className:"form__label"}),Object(d.jsx)("input",{type:"text",className:"form__item form__item_type_about",id:"about",name:"about",placeholder:"\u041e \u0441\u0435\u0431\u0435",required:!0,minLength:"2",maxLength:"200",value:i||"",onChange:function(e){m(e.target.value)}}),Object(d.jsx)("span",{className:"form__input-error",id:"about-error"})]})]})})};var v=function(e){var t=s.a.useRef();return Object(d.jsx)(O,{name:"edit-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(a){a.preventDefault(),e.onUpdateAvatar({avatar:t.current.value}),t.current.value=""},buttonText:e.buttonText,buttonDisable:e.buttonDisable,children:Object(d.jsxs)("div",{className:"form__section",children:[Object(d.jsx)("label",{htmlFor:"avatar-link",className:"form__label"}),Object(d.jsx)("input",{ref:t,type:"url",className:"form__item form__item_type_avatar-link",id:"avatar-link",name:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,defaultValue:""}),Object(d.jsx)("span",{className:"form__input-error",id:"avatar-link-error"})]})})};var N=function(e){return Object(d.jsx)(O,{name:"cardDelete",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onDeleteCard(e.onCardDeleteData)},buttonText:e.buttonText,buttonDisable:e.buttonDisable})};var g=function(e){return Object(d.jsx)("section",{className:""!==e.card.link?"popup popup_type_photo popup_is-opened":"popup popup_type_photo",children:Object(d.jsxs)("div",{className:"popup-photo",children:[Object(d.jsx)("button",{className:"popup__close page__button",onClick:e.onClose}),Object(d.jsxs)("figure",{className:"popup-photo__image-container",children:[Object(d.jsx)("img",{className:"popup-photo__image",alt:e.card.name,src:e.card.link}),Object(d.jsx)("figcaption",{className:"popup-photo__title",children:e.card.name})]})]})})};var k=function(e){return Object(d.jsxs)("section",{className:"popup popup_type_InfoTooltip",children:[Object(d.jsx)("button",{className:"popup__close page__button",onClick:e.onClose}),Object(d.jsx)("img",{className:"popup-info-tooltip__image",alt:"",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAANlBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC3dmhyAAAAEXRSTlMAIN/vYBCAQL9wMJ/PkK+gUEytRtEAAAQQSURBVGje1ZvZduowDEUteZ4C/P/PXoy5VYtJ4zGLnleSbHQsy/EQ1iypRfQGkd+SMJhNWS3ZWmm74e2tcLOarZG0ht9+Fd8ELKB+PT54JTRAdhecFmqjv2SmsrV/Phj93nOduOCT7fUsrHkGYw+CAfG8MogZWHxSqxIXRMjWiCnR8tjgnrtk9IjhkLFKNt4WHy556OVaTthGtMr/eCBcLzvNehiO0BluGGgowBS0bS0YMf1hxYb08Du2/duQfHJsUICNdrt0Q5QTKm1sIl9T81o2RTY19LXuWpGuHbG5dE9UcUt3xhta9HLXk6/EnUu+HlzDiTuXzN3BFd3coecu4JKTYb8wpO7u2BK536qnnVE3mh5OdsSJqNJODrsNLNkyyfvzzd4gBmyhHJn9arRiS6Xemu3vRrPFCm/M1muNJoguM8uz5boUIQsKeKUkfw0ZKbOWSr1kkuir0eMhh3U1qwzZDKf0eMieUnq54jcWNI2G432ZS0qtwE6ToYptKl4Cpw7MhpwGdprkHSf/O23YeSKvt6lOO1XtNZ/ptOP7tZc6EX/mN07jCl4xn8dcQ+zE6iFuD6nDwdFSE8/jEnn/si0H7mYNAF+yB42Mj27Fp3NxP5RnOsuUW2Y6Fw5f+nTKre00LmWXSDeo07h0caSkPoNLae2ZSX6Pyjdxc14F6k0zuIG4B/0Jhyu1/M6VrBZ8v7rq6fu/hEZurh2VYAiignup47IErQTj3os3fOcyNhus9vIVsODOBAsq/ftcxZrAuWAX2nm8h0EugWu6kymGnTEu9eOKgIkwwqVlmEAl82Arp6hNrotLJTMNUTV7QSQUDy7v4tK7T6T7qu2O8gdXdIxlKtF95fSShHaEm4Zim/wOdf7g+/35dm7Oq/qXPTDvuK6dm2tHy7ioBrnUm7DhhZ5yrKgnHUldTGGaujRC7wuLbZ+0WT7ApUlbxzQVsJtL01SaobdIEbe3iWmG3qQrdnJprYdWQ5oEJnRxaa2HvG6U7ILSWg95fZpCdpoWNk+Sy05nXdavGpcLtrSwuViUWvpHhit2iiKNwieFTGVPfMJmyFkhQ/mmZNbvDtA+Yrn7tljwDmKW7g/QPuLnbOMyu3ovBvbmHGb9Vj1+1uGEE45jfNoBFCZDYcfEGo3yAw8ZMbfuWBV85kGyl6Nzf/rQHnGryG7enl/ifvaBUMZg7hFY13Nad/wUauMsa84x5x7jLB8MWoeOg9008/cwskNioM8q/vAbOrCKU7j9J/AjNGMp3LHvQrxruCVmrGZjEhkdBLR8JYSEHUCHyi+KIFMp2mHpyy0LvXA7UOExX8P9DCw9lz60MpsS2kG2FkAL5UNq1uIroWns7ejTsh3qX/2Yjj4ftGozAXOQiMZHodsj/QcvIWFxIhkcawAAAABJRU5ErkJggg=="}),Object(d.jsx)("p",{className:"popup-info-tooltip__text",children:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"})]})},C=a(15),y=a(16),S=new(function(){function e(t,a){Object(C.a)(this,e),this.url=t.url,this.authorization=a,this.headers={"Content-Type":"application/json",authorization:this.authorization}}return Object(y.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getCards",value:function(){var e=this;return fetch(this.url+"cards",{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"createCardApi",value:function(e){var t=this;return fetch(this.url+"cards",{headers:this.headers,method:"POST",body:JSON.stringify(e)}).then((function(e){return t._getResponseData(e)}))}},{key:"deleteCardApi",value:function(e){var t=this;return fetch(this.url+"cards/"+e,{headers:this.headers,method:"DELETE"}).then((function(e){return t._getResponseData(e)}))}},{key:"getUserInfoApi",value:function(){var e=this;return fetch(this.url+"users/me",{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"createNewUserInfoApi",value:function(e){var t=this;return fetch(this.url+"users/me",{headers:this.headers,method:"PATCH",body:JSON.stringify(e)}).then((function(e){return t._getResponseData(e)}))}},{key:"createNewUserAvatarApi",value:function(e){var t=this;return fetch(this.url+"users/me/avatar",{headers:this.headers,method:"PATCH",body:JSON.stringify(e)}).then((function(e){return t._getResponseData(e)}))}},{key:"likeApi",value:function(e){var t=this;return fetch(this.url+"cards/likes/"+e,{headers:this.headers,method:"PUT"}).then((function(e){return t._getResponseData(e)}))}},{key:"deleteLikedApi",value:function(e){var t=this;return fetch(this.url+"cards/likes/"+e,{headers:this.headers,method:"DELETE"}).then((function(e){return t._getResponseData(e)}))}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-27/"},"8ab69193-abde-425d-8080-68fbeb2c2f47");var D=function(){var e={name:"",link:""},t=s.a.useState(!1),a=Object(l.a)(t,2),n=a[0],o=a[1],r=s.a.useState(!1),c=Object(l.a)(r,2),m=c[0],j=c[1],O=s.a.useState(!1),C=Object(l.a)(O,2),y=C[0],D=C[1],T=s.a.useState(!1),E=Object(l.a)(T,2),L=E[0],w=E[1],U=s.a.useState(e),R=Object(l.a)(U,2),F=R[0],B=R[1],G=s.a.useState([]),M=Object(l.a)(G,2),P=M[0],q=M[1],H=s.a.useState({}),I=Object(l.a)(H,2),J=I[0],Z=I[1],K=s.a.useState(!1),Q=Object(l.a)(K,2);function W(){o(!1),D(!1),j(!1),w(!1),B(e)}Q[0],Q[1],s.a.useEffect((function(){S.getUserInfoApi().then((function(e){Z(e)})).catch((function(e){return console.log(e)}))}),[]),s.a.useEffect((function(){var e=function(e){"Escape"===e.key&&W()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[]),s.a.useEffect((function(){S.getCards().then((function(e){q(e)})).catch((function(e){return console.log(e)}))}),[]);var V=s.a.useState([]),X=Object(l.a)(V,2),Y=X[0],z=X[1],$=s.a.useState(""),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],ne=s.a.useState(!1),se=Object(l.a)(ne,2),oe=se[0],re=se[1];function ce(e,t){t?(ae("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),re(!0)):(ae(e),re(!1))}return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(u.Provider,{value:J,children:Object(d.jsx)("div",{className:"page",children:Object(d.jsxs)("div",{className:"page__content",children:[Object(d.jsx)(p,{}),Object(d.jsx)(f,{}),Object(d.jsx)(h,{}),Object(d.jsx)(b,{onEditProfile:function(){o(!0)},onAddPlace:function(){j(!0)},onEditAvatar:function(e){D(!0)},onCardClick:function(e){B(e)},cards:P,onCardLike:function(e){e.likes.some((function(e){return e._id===J._id}))?S.deleteLikedApi(e._id).then((function(t){q((function(a){return a.map((function(a){return a._id===e._id?t:a}))}))})).catch((function(e){return console.log(e)})):S.likeApi(e._id).then((function(t){q((function(a){return a.map((function(a){return a._id===e._id?t:a}))}))})).catch((function(e){return console.log(e)}))},onCardDelete:function(){w(!0)},onCardDataRead:function(e){z(e)},onButtonTextRead:function(e){ae(e)}}),Object(d.jsx)(_,{}),Object(d.jsx)(k,{onClose:W}),Object(d.jsx)(g,{card:F,onClose:W}),Object(d.jsx)(A,{isOpen:n,onClose:W,onUpdateUser:function(e){ce(te,!0),S.createNewUserInfoApi(e).then((function(e){Z(e),W()})).catch((function(e){return console.log(e)})).finally((function(){ce(te,!1)}))},buttonText:te,buttonDisable:oe}),Object(d.jsx)(v,{isOpen:y,onClose:W,onUpdateAvatar:function(e){ce(te,!0),S.createNewUserAvatarApi(e).then((function(e){Z(e),W()})).catch((function(e){return console.log(e)})).finally((function(){ce(te,!1)}))},buttonText:te,buttonDisable:oe}),Object(d.jsx)(x,{isOpen:m,onClose:W,onAddPlace:function(e){ce(te,!0),S.createCardApi(e).then((function(e){q([e].concat(Object(i.a)(P))),W()})).catch((function(e){return console.log(e)})).finally((function(){ce(te,!1)}))},buttonText:te,buttonDisable:oe}),Object(d.jsx)(N,{isOpen:L,onClose:W,onDeleteCard:function(e){S.deleteCardApi(e._id).then((function(){q((function(t){return t.filter((function(t){return e._id!==t._id}))})),W()})).catch((function(e){return console.log(e)}))},onCardDeleteData:Y,buttonText:te})]})})})})},T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,30)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),o(e),r(e)}))};r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(c.a,{children:Object(d.jsx)(D,{})})}),document.getElementById("root")),T()}},[[29,1,2]]]);
//# sourceMappingURL=main.f312e52d.chunk.js.map